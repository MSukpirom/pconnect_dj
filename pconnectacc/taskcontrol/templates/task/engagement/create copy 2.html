{% extends 'task/index.html' %}
{% block content %}
<div class="row">
    <div class="card w-100">
        <div class="card-body">
            <form method="post" action="{% url 'taskcontrol:engagement_create' %}">
                {% csrf_token %}
                <div class="h4 pb-2 mb-4 text-primary fw-semibold border-bottom border-primary">สร้าง Engagement</div>

                <!-- Client Selection -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="client" class="form-label fw-semibold">รหัสลูกค้า</label>
                        <select name="client" id="client" class="selectpicker" data-live-search="true">
                            {% for c in client_list %}
                                <option value="{{ c.id }}" {% if c.id == selected_client_id %}selected{% endif %}>
                                    {{ c.code }} {{ c.company_name }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-4"></div>
                    <div class="col-md-2">
                        <div class="content-end">
                            <div class="form-check form-switch">
                                <label for="e_status" class="form-check-label fw-semibold">เปิดงาน</label>
                                <input class="form-check-input" type="checkbox" data-bs-switch id="e_status" name="e_status" checked>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="job_code" class="form-label fw-semibold">รหัส Job</label>
                        <input type="text" name="job_code" id="job_code" class="form-control" />
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="start_date_service" class="form-label fw-semibold">วันที่เริ่มบริการ</label>
                        <input type="date" id="" name="start_date_service" class="form-control">
                    </div>
                    <div class="col-md-6">
                        <label for="end_date_service" class="form-label fw-semibold">วันที่สิ้นสุดบริการ</label>
                        <input type="date" id="" name="end_date_service" class="form-control">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="start_date_period" class="form-label fw-semibold">รอบที่เริ่มให้บริการ</label>
                        <input type="date" name="start_date_period" class="form-control">
                    </div>
                    <div class="col-md-6">
                        <label for="end_date_period" class="form-label fw-semibold">รอบที่สิ้นสุดให้บริการ</label>
                        <input type="date" name="end_date_period" class="form-control">
                    </div>
                </div>

                <!-- Administrator -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="administrator" class="form-label fw-semibold">ผู้ดูแล</label>
                        <input type="text" class="form-control" value="{{ user.first_name }} {{ user.last_name }}" aria-label="Disabled input example" disabled readonly>
                    </div>
                </div>

                <!-- Reviewer -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="reviewer" class="form-label fw-semibold">ผู้ตรวจทาน</label>
                        <select name="reviewer" class="form-select">
                            {% for reviewer in reviewers %}
                                <option select hidden>-- กรุณาเลือกผู้ตรวจทาน -- </option>
                                <option value="{{ reviewer.id }}">{{ reviewer.first_name }} {{ reviewer.last_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <!-- Approver -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="approver" class="form-label fw-semibold">ผู้อนุมัติ</label>
                        <select name="approver" class="form-select">
                            {% for approver in approvers %}
                                <option select hidden>-- กรุณาเลือกผู้อนุมัติ -- </option>
                                <option value="{{ approver.id }}">{{ approver.first_name }} {{ approver.last_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button type="submit" class="btn btn-primary me-md-2"><i class="fa-solid fa-circle-check"></i> บันทึกข้อมูล</button>
                    <button type="reset" class="btn btn-light">ล้างข้อมูล</button>
                    <a href="{% url 'taskcontrol:engagement_list' %}" class="btn btn-outline-danger">
                        <i class="fa-solid fa-circle-xmark"></i> ยกเลิก
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock content %}